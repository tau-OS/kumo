// Project-local debug tasks
//
// For more documentation on how to configure debug tasks,
// see: https://zed.dev/docs/debugger
[
    {
        "label": "Debug inside compositor",
        "build": {
            "command": "cargo",
            "args": ["build"],
            "cwd": "$ZED_WORKTREE_ROOT",
            "allow_concurrent_runs": false,
            "fail_on_nonzero_exit": true
        },
        "sourceLanguages": ["rust"],
        "adapter": "CodeLLDB",
        // "initCommands": [
        //     "/usr/bin/labwc", "--startup", "target/debug/kumo"
        // ],
        "request": "launch",
        "env": {
            "WAYLAND_DISPLAY": "wayland-1",
            "GTK_DEBUG": "interactive"
        },

        // "preRunCommands": ["labwc"],
        // "exitCommands": ["pkill", "-f", "labwc"],
        "program": "$ZED_WORKTREE_ROOT/target/debug/kumo"
    }
]
